<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê¸°ì¨ì´ ì±—ë´‡</title>
</head>
<body>
  <h1>ê¸°ì¨ì´ ì±—ë´‡</h1>

  <input type="text" id="userInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
  <button onclick="sendMessage()">ë³´ë‚´ê¸°</button>

  <!-- ëŒ€í™” ë¡œê·¸ -->
  <div id="response" style="margin-top:20px; font-weight:bold;">
    <b>ê¸°ì¨ì´:</b> ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ <b>ê¸°ì¨ì´</b> ì…ë‹ˆë‹¤ ğŸ˜Š<br/>
    ë³´ì„±êµ° ì§€ì—­ì¶•ì œ ì˜ìƒ ì œì‘ì„ ì›í•˜ì‹œë‚˜ìš”, ì•„ë‹ˆë©´ ì¼ë°˜ ëŒ€í™”/ë‹¤ë¥¸ ì—…ë¬´ë¥¼ ì›í•˜ì‹œë‚˜ìš”?
  </div>

  <script>
    async function sendMessage() {
      const userInput = document.getElementById("userInput").value;
      if (!userInput.trim()) return;

      // ì„œë²„ ìš”ì²­
      const res = await fetch(`/chat?user_input=${encodeURIComponent(userInput)}`);
      const data = await res.json();

      // ëŒ€í™” ë¡œê·¸ ì¶”ê°€
      const resBox = document.getElementById("response");
      resBox.innerHTML += `<br/><br/><b>ë‚˜:</b> ${userInput}<br/><b>ê¸°ì¨ì´:</b> ${data.response || data.error}`;

      // ì…ë ¥ì°½ ì´ˆê¸°í™”
      document.getElementById("userInput").value = "";
    }

    // Enter í‚¤ë¡œë„ ì „ì†¡ ê°€ëŠ¥í•˜ê²Œ
    document.getElementById("userInput").addEventListener("keypress", function (e) {
      if (e.key === "Enter") {
        sendMessage();
      }
    });
  </script>
</body>
</html>
